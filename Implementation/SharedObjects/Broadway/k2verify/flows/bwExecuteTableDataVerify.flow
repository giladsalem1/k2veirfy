{
    "tags": [
        "D2D",
        "D2D\flows",
        "k2verify"
    ],
    "levels": [
        {
            "stages": [
                {
                    "name": "Flow inputs",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "LUName",
                            "actorType": {
                                "parentType": "GetLUName",
                                "inputs": [],
                                "outputs": [
                                    {
                                        "name": "lu_name",
                                        "schema": {
                                            "type": "string"
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            "name": "Now",
                            "actorType": {
                                "parentType": "Now",
                                "inputs": [],
                                "outputs": []
                            }
                        },
                        {
                            "name": "START_TIME",
                            "actorType": {
                                "parentType": "ToString",
                                "inputs": [],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Opetational DB",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "K2VERIFY_INTERFACE",
                            "actorType": {
                                "parentType": "GetLUVariable",
                                "inputs": [
                                    {
                                        "name": "variableName",
                                        "const": "K2VERIFY_OPERATIONAL_INTERFACE"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "K2VERIFY_SCHEMA",
                            "actorType": {
                                "parentType": "GetLUVariable",
                                "inputs": [
                                    {
                                        "name": "variableName",
                                        "const": "K2VERIFY_OPERATIONAL_SCHEMA"
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Comparison config",
                    "dependsOnList": [],
                    "remark": "Tables comparison custom configurations are stored in mtK2VerifyConfig mtable. This actor retrieves those configurations from the mtable.",
                    "actors": [
                        {
                            "name": "MTableLookup",
                            "actorType": {
                                "parentType": "MTableLookup",
                                "inputs": [
                                    {
                                        "name": "mtable",
                                        "const": "mtK2VerifyConfig"
                                    },
                                    {
                                        "name": "Source_Table_Name",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "mtable",
                                        "editor": {
                                            "id": "com.k2view.mTableKey"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "Source_Interface",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "mtable",
                                        "editor": {
                                            "id": "com.k2view.mTableKey"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "Source_Schema",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "mtable",
                                        "editor": {
                                            "id": "com.k2view.mTableKey"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "Target_Table_Name",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "mtable",
                                        "editor": {
                                            "id": "com.k2view.mTableKey"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "Target_Interface",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "mtable",
                                        "editor": {
                                            "id": "com.k2view.mTableKey"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "Target_Schema",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "mtable",
                                        "editor": {
                                            "id": "com.k2view.mTableKey"
                                        },
                                        "mandatory": false
                                    }
                                ],
                                "outputs": [
                                    {
                                        "name": "result",
                                        "schema": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "Source_Table_Name": {
                                                        "type": "string"
                                                    },
                                                    "Source_Interface": {
                                                        "type": "string"
                                                    },
                                                    "Source_Schema": {
                                                        "type": "string"
                                                    },
                                                    "Source_Transformation_Function_Name": {},
                                                    "source_columns_to_Ignore_null": {},
                                                    "Target_Table_Name": {
                                                        "type": "string"
                                                    },
                                                    "Target_Interface": {
                                                        "type": "string"
                                                    },
                                                    "Target_Schema": {
                                                        "type": "string"
                                                    },
                                                    "Target_Transformation_Function_Name": {},
                                                    "target_columns_to_Ignore_null": {},
                                                    "Customized_Key_Comparison": {
                                                        "type": "string"
                                                    },
                                                    "Pii_Columns": {
                                                        "type": "string"
                                                    },
                                                    "Excluded_Columns_Names": {},
                                                    "Active": {
                                                        "type": "string"
                                                    },
                                                    "Mode": {},
                                                    "Excluded_Rows_Sql": {},
                                                    "Column_Mapping": {},
                                                    "Buckets": {
                                                        "type": "string"
                                                    },
                                                    "Buckets_Method": {
                                                        "type": "string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Update table verify started",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "NotNull1",
                            "condition": "result",
                            "actorType": {
                                "parentType": "NotNull",
                                "inputs": [],
                                "outputs": []
                            }
                        },
                        {
                            "name": "StartedTableVerify",
                            "actorType": {
                                "parentType": "DbLoad",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": null
                                    },
                                    {
                                        "name": "command",
                                        "const": "upsert"
                                    },
                                    {
                                        "name": "schema",
                                        "const": null
                                    },
                                    {
                                        "name": "table",
                                        "const": "task_execution_tables"
                                    },
                                    {
                                        "name": "fields",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name",
                                            "status",
                                            "start_time",
                                            "bucket_count"
                                        ]
                                    },
                                    {
                                        "name": "keys",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name"
                                        ]
                                    },
                                    {
                                        "name": "dialect",
                                        "const": "postgres"
                                    },
                                    {
                                        "name": "task_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "execution_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "table_name",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "const": "In_Progress",
                                        "name": "status",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "start_time",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "bucket_count",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "fields",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "InterfaceType",
                            "actorType": {
                                "parentType": "InnerFlow",
                                "inputs": [
                                    {
                                        "name": "flowName",
                                        "const": "bwCheckDBType"
                                    },
                                    {
                                        "name": "interface",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "flowName",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": [
                                    {
                                        "name": "type",
                                        "schema": {
                                            "type": "string"
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Set table verify globals",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "SYNC Force",
                            "actorType": {
                                "parentType": "FabricSet",
                                "inputs": [
                                    {
                                        "name": "key",
                                        "const": "sync"
                                    },
                                    {
                                        "name": "value",
                                        "const": "force"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "SRC Interface",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_INTERFACE_SRC=?;"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "SRC Interface Type",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_INTERFACE_SRC_TYPE=?;"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "SRC Schema",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_SCHEMA_SRC=?;"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "SRC Table",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_TABLE_SRC=?;"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "TAR Interface",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_INTERFACE_TAR=?;"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "TAR Schema",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_SCHEMA_TAR=?;"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "TAR Table",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_TABLE_TAR=?;"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "TASK ID",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_TASK_ID='${@task_id}'"
                                    },
                                    {
                                        "name": "task_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "sql",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "EXECUTION ID",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_EXEC_ID='${@execution_id}'"
                                    },
                                    {
                                        "name": "execution_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "sql",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "LOG PASS",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_LOG_PASS='${@log_pass}'"
                                    },
                                    {
                                        "name": "log_pass",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "sql",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "COMPARE ONLY PII",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": "set K2VERIFY_COMPARE_ONLY_PII='${@compare_only_pii}'"
                                    },
                                    {
                                        "name": "compare_only_pii",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "sql",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Interface Type",
                    "dependsOnList": [],
                    "actors": []
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Cassandra interface",
                    "dependsOnList": [
                        "Interface Type"
                    ],
                    "actors": [
                        {
                            "name": "CassandraInterface",
                            "condition": "result",
                            "actorType": {
                                "parentType": "EqualsIgnoreCase",
                                "inputs": [
                                    {
                                        "name": "b",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "const": "Cassandra (Db)"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "ExtractKeysFromCassTable",
                            "actorType": {
                                "parentType": "InnerFlow",
                                "inputs": [
                                    {
                                        "name": "flowName",
                                        "const": "bwExtractKeyFromCassTable"
                                    },
                                    {
                                        "name": "schema",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "flowName",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "customized_key",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "flowName",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "buckets_count",
                                        "schema": {
                                            "type": "integer"
                                        },
                                        "createdBy": "flowName",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                },
                {
                    "name": "Else",
                    "dependsOnList": [
                        "Interface Type"
                    ],
                    "hasElse": true,
                    "actors": []
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Batch command params",
                    "dependsOnList": [],
                    "remark": "the batch is executed on the comparison buckets",
                    "actors": [
                        {
                            "name": "MaxWorkers",
                            "actorType": {
                                "parentType": "NotNull",
                                "inputs": [],
                                "outputs": []
                            }
                        },
                        {
                            "name": "MaxWorkersString",
                            "actorType": {
                                "parentType": "StringFormat",
                                "inputs": [
                                    {
                                        "name": "format",
                                        "const": "MAX_WORKERS_PER_NODE=${maxWorkers}"
                                    },
                                    {
                                        "name": "maxWorkers",
                                        "schema": {},
                                        "createdBy": "format",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "IfElse1",
                            "actorType": {
                                "parentType": "IfElse",
                                "inputs": [],
                                "outputs": []
                            }
                        },
                        {
                            "name": "FormatBatchSql",
                            "actorType": {
                                "parentType": "StringFormat",
                                "inputs": [
                                    {
                                        "name": "format",
                                        "const": "WITH RECURSIVE  cnt(IID) AS (SELECT 0 UNION ALL SELECT IID+1 FROM cnt LIMIT ${groupsCnt}  ) SELECT \"${table_name}_@_\"||IID as IID FROM cnt"
                                    },
                                    {
                                        "name": "groupsCnt",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "table_name",
                                        "schema": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "createdBy": "format",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Batch command",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "BatchCommand",
                            "actorType": {
                                "parentType": "StringFormat",
                                "inputs": [
                                    {
                                        "name": "format",
                                        "const": "BATCH ${lut} from fabric using('${sql}') FABRIC_COMMAND=\"sync_instance ${lut}.?\" with async='true' ${maxWorkers};"
                                    },
                                    {
                                        "const": "K2Verify",
                                        "name": "lut",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "maxWorkers",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "sql",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Execute buckets bacth",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "ExecuteBatch",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "fabric"
                                    },
                                    {
                                        "name": "sql",
                                        "const": null
                                    }
                                ],
                                "outputs": [
                                    {
                                        "name": "result",
                                        "schema": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "Batch id": {
                                                        "type": "string"
                                                    },
                                                    "Execution id": {
                                                        "type": "string"
                                                    },
                                                    "Notes": {
                                                        "type": "string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Table verify in progress",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "VerifyInProgress",
                            "actorType": {
                                "parentType": "DbLoad",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": null
                                    },
                                    {
                                        "name": "command",
                                        "const": "update"
                                    },
                                    {
                                        "name": "schema",
                                        "const": null
                                    },
                                    {
                                        "name": "table",
                                        "const": "task_execution_tables"
                                    },
                                    {
                                        "name": "fields",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name",
                                            "batch_id",
                                            "status",
                                            "start_time"
                                        ]
                                    },
                                    {
                                        "name": "keys",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name"
                                        ]
                                    },
                                    {
                                        "name": "dialect",
                                        "const": "postgres"
                                    },
                                    {
                                        "name": "task_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "execution_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "table_name",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "batch_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "const": "In_Progress",
                                        "name": "status",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "start_time",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Wait for the batch to finish",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "ErrorFields1",
                            "onError": "message",
                            "actorType": {
                                "parentType": "ErrorFields",
                                "inputs": [],
                                "outputs": []
                            }
                        },
                        {
                            "name": "BatchWait1",
                            "actorType": {
                                "parentType": "BatchWait",
                                "inputs": [],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Table verify end_time",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "Now2",
                            "actorType": {
                                "parentType": "Now",
                                "inputs": [],
                                "outputs": []
                            }
                        },
                        {
                            "name": "END_TIME1",
                            "actorType": {
                                "parentType": "ToString",
                                "inputs": [],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Batch succeeded",
                    "dependsOnList": [
                        "Table verify end_time"
                    ],
                    "actors": [
                        {
                            "name": "BatchSuccess",
                            "condition": "result",
                            "actorType": {
                                "parentType": "IsNull",
                                "inputs": [],
                                "outputs": []
                            }
                        }
                    ]
                },
                {
                    "name": "Batch was cancelled",
                    "dependsOnList": [
                        "Table verify end_time"
                    ],
                    "hasElse": true,
                    "actors": [
                        {
                            "name": "IsCancelled",
                            "condition": "result",
                            "actorType": {
                                "parentType": "EqualsIgnoreCase",
                                "inputs": [
                                    {
                                        "name": "b",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "const": "Batch was cancelled"
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "VerifyCancelled",
                            "actorType": {
                                "parentType": "DbLoad",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": null
                                    },
                                    {
                                        "name": "command",
                                        "const": "update"
                                    },
                                    {
                                        "name": "schema",
                                        "const": null
                                    },
                                    {
                                        "name": "table",
                                        "const": "task_execution_tables"
                                    },
                                    {
                                        "name": "fields",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name",
                                            "batch_id",
                                            "status",
                                            "start_time",
                                            "end_time"
                                        ]
                                    },
                                    {
                                        "name": "keys",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name"
                                        ]
                                    },
                                    {
                                        "name": "dialect",
                                        "const": "postgres"
                                    },
                                    {
                                        "name": "task_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "execution_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "table_name",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "batch_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "const": "Stopped",
                                        "name": "status",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "start_time",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "end_time",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                },
                {
                    "name": "Batch failed",
                    "dependsOnList": [
                        "Table verify end_time"
                    ],
                    "hasElse": true,
                    "actors": [
                        {
                            "name": "VerifyFailed",
                            "actorType": {
                                "parentType": "DbLoad",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": null
                                    },
                                    {
                                        "name": "command",
                                        "const": "update"
                                    },
                                    {
                                        "name": "schema",
                                        "const": null
                                    },
                                    {
                                        "name": "table",
                                        "const": "task_execution_tables"
                                    },
                                    {
                                        "name": "fields",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name",
                                            "batch_id",
                                            "status",
                                            "start_time",
                                            "end_time"
                                        ]
                                    },
                                    {
                                        "name": "keys",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name"
                                        ]
                                    },
                                    {
                                        "name": "dialect",
                                        "const": "postgres"
                                    },
                                    {
                                        "name": "task_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "execution_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "table_name",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "batch_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "const": "Failed",
                                        "name": "status",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "start_time",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "end_time",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "dummy",
                    "dependsOnList": [
                        "Batch succeeded"
                    ],
                    "actors": []
                },
                {
                    "name": "Stage 16",
                    "dependsOnList": [
                        "Batch was cancelled"
                    ],
                    "actors": []
                },
                {
                    "name": "Stage 20",
                    "dependsOnList": [
                        "Batch failed"
                    ],
                    "actors": []
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Buckets failed",
                    "dependsOnList": [
                        "dummy"
                    ],
                    "actors": [
                        {
                            "name": "BucketsFailed > 0",
                            "condition": "result",
                            "actorType": {
                                "parentType": "GreaterThan",
                                "inputs": [
                                    {
                                        "name": "b",
                                        "const": 0
                                    }
                                ],
                                "outputs": []
                            }
                        },
                        {
                            "name": "Failed",
                            "actorType": {
                                "parentType": "Const",
                                "inputs": [
                                    {
                                        "name": "value",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "const": "Failed"
                                    }
                                ],
                                "outputs": [
                                    {
                                        "name": "value",
                                        "schema": {
                                            "type": "string"
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Stage 12",
                    "dependsOnList": [
                        "dummy"
                    ],
                    "hasElse": true,
                    "actors": [
                        {
                            "name": "Completed",
                            "actorType": {
                                "parentType": "Const",
                                "inputs": [
                                    {
                                        "name": "value",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "const": "Completed"
                                    }
                                ],
                                "outputs": [
                                    {
                                        "name": "value",
                                        "schema": {
                                            "type": "string"
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Stage 17",
                    "dependsOnList": [
                        "Stage 16"
                    ],
                    "actors": []
                },
                {
                    "name": "Stage 21",
                    "dependsOnList": [
                        "Stage 20"
                    ],
                    "actors": []
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Table verify completed",
                    "dependsOnList": [
                        "Stage 12",
                        "Buckets failed"
                    ],
                    "actors": [
                        {
                            "name": "VerifyCompleted",
                            "actorType": {
                                "parentType": "DbLoad",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": null
                                    },
                                    {
                                        "name": "command",
                                        "const": "update"
                                    },
                                    {
                                        "name": "schema",
                                        "const": null
                                    },
                                    {
                                        "name": "table",
                                        "const": "task_execution_tables"
                                    },
                                    {
                                        "name": "fields",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name",
                                            "batch_id",
                                            "status",
                                            "start_time",
                                            "end_time"
                                        ]
                                    },
                                    {
                                        "name": "keys",
                                        "const": [
                                            "task_id",
                                            "execution_id",
                                            "table_name"
                                        ]
                                    },
                                    {
                                        "name": "dialect",
                                        "const": "postgres"
                                    },
                                    {
                                        "name": "task_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "execution_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "table_name",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "batch_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "status",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "start_time",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "end_time",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                },
                {
                    "name": "Stage 19",
                    "dependsOnList": [
                        "Stage 17"
                    ],
                    "actors": []
                },
                {
                    "name": "Stage 22",
                    "dependsOnList": [
                        "Stage 21"
                    ],
                    "actors": []
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Table summary ",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "TableSummaryRows",
                            "actorType": {
                                "parentType": "DbCommand",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": null
                                    },
                                    {
                                        "name": "sql",
                                        "const": "SELECT\n  execution_id,\n  iid,\n  source_table_name,\n  target_table_name,\n  SUM(\"MATCH\")    AS number_of_records_match,\n  SUM(mismatch)   AS number_of_records_mismatch,\n  SUM(nofois)     AS number_of_records_only_in_source,\n  SUM(nofoit)     AS number_of_records_only_in_target,\n  SUM(nofuit)     AS number_of_records_unsecured_in_target\nFROM (\n  SELECT\n    r.execution_id,\n    r.iid,\n    r.source_table_name,\n    r.target_table_name,\n    CASE WHEN r.number_of_fields_mismatch > 0 THEN 1 ELSE 0 END AS mismatch,\n    CASE WHEN r.number_of_fields_mismatch = 0\n              AND r.number_of_fields_only_in_target = 0\n              AND r.number_of_fields_only_in_source = 0\n         THEN 1 ELSE 0 END AS \"MATCH\",\n    CASE WHEN r.number_of_fields_only_in_target > 0 THEN 1 ELSE 0 END AS nofoit,\n    CASE WHEN r.number_of_fields_only_in_source > 0 THEN 1 ELSE 0 END AS nofois,\n    CASE WHEN r.number_of_fields_unsecured_in_target > 0 THEN 1 ELSE 0 END AS nofuit\n  FROM ${@result_schema}.k2verify_record_summary r\n  GROUP BY\n    r.execution_id,\n    r.iid,\n    r.source_table_name,\n    r.target_table_name,\n    r.customized_key,\n    -- include the CASE expressions in GROUP BY for Postgres\n    CASE WHEN r.number_of_fields_mismatch > 0 THEN 1 ELSE 0 END,\n    CASE WHEN r.number_of_fields_mismatch = 0\n              AND r.number_of_fields_only_in_target = 0\n              AND r.number_of_fields_only_in_source = 0\n         THEN 1 ELSE 0 END,\n    CASE WHEN r.number_of_fields_only_in_target > 0 THEN 1 ELSE 0 END,\n    CASE WHEN r.number_of_fields_only_in_source > 0 THEN 1 ELSE 0 END,\n    CASE WHEN r.number_of_fields_unsecured_in_target > 0 THEN 1 ELSE 0 END\n) t\nwhere execution_id='${@execution_id}' and source_table_name='${@source_table_name}'\nGROUP BY\n  execution_id, iid, source_table_name, target_table_name;\n"
                                    },
                                    {
                                        "name": "execution_id",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "sql",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "result_schema",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "sql",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "source_table_name",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "sql",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": [
                                    {
                                        "name": "result",
                                        "schema": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "execution_id": {
                                                        "type": "string"
                                                    },
                                                    "iid": {
                                                        "type": "string"
                                                    },
                                                    "source_table_name": {
                                                        "type": "string"
                                                    },
                                                    "target_table_name": {
                                                        "type": "string"
                                                    },
                                                    "number_of_records_match": {
                                                        "type": "integer"
                                                    },
                                                    "number_of_records_mismatch": {
                                                        "type": "integer"
                                                    },
                                                    "number_of_records_only_in_source": {
                                                        "type": "integer"
                                                    },
                                                    "number_of_records_only_in_target": {
                                                        "type": "integer"
                                                    },
                                                    "number_of_records_unsecured_in_target": {
                                                        "type": "integer"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Table results",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "Is Matched",
                            "actorType": {
                                "parentType": "JavaScript",
                                "inputs": [
                                    {
                                        "name": "script",
                                        "const": "var rs;\nif( mismatch == 0 && source == 0 && target == 0){\n    rs = 'PASSED';\n}else{\n    rs = 'NOT PASSED';\n}"
                                    },
                                    {
                                        "name": "mismatch",
                                        "schema": {
                                            "type": "integer"
                                        }
                                    },
                                    {
                                        "name": "source",
                                        "schema": {
                                            "type": "integer"
                                        }
                                    },
                                    {
                                        "name": "target",
                                        "schema": {
                                            "type": "integer"
                                        }
                                    }
                                ],
                                "outputs": [
                                    {
                                        "name": "result",
                                        "schema": {
                                            "type": "string"
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "stages": [
                {
                    "name": "Load table summary report",
                    "dependsOnList": [],
                    "actors": [
                        {
                            "name": "CheckReportCondition",
                            "condition": "insert",
                            "actorType": {
                                "parentType": "InnerFlow",
                                "inputs": [
                                    {
                                        "name": "flowName",
                                        "const": "bwCheckReportCondition"
                                    },
                                    {
                                        "name": "result",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "mandatory": false
                                    },
                                    {
                                        "name": "schema",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "mandatory": false
                                    }
                                ],
                                "outputs": [
                                    {
                                        "name": "insert",
                                        "schema": {
                                            "type": "boolean"
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            "name": "TableSummaryReport",
                            "actorType": {
                                "parentType": "DbLoad",
                                "inputs": [
                                    {
                                        "name": "interface",
                                        "const": "K2VERIFY_OPERATIONAL_DB"
                                    },
                                    {
                                        "name": "schema",
                                        "const": "k2verify"
                                    },
                                    {
                                        "name": "table",
                                        "const": "k2verify_table_summary"
                                    },
                                    {
                                        "name": "fields",
                                        "const": [
                                            "execution_id",
                                            "iid",
                                            "source_table_name",
                                            "target_table_name",
                                            "number_of_records_match",
                                            "number_of_records_mismatch",
                                            "number_of_records_only_in_source",
                                            "number_of_records_only_in_target",
                                            "number_of_records_unsecured_in_target",
                                            "match_result"
                                        ]
                                    },
                                    {
                                        "name": "keys",
                                        "const": [
                                            "execution_id",
                                            "iid",
                                            "source_table_name",
                                            "target_table_name"
                                        ]
                                    },
                                    {
                                        "name": "dialect",
                                        "const": "postgres"
                                    },
                                    {
                                        "name": "execution_id",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "iid",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "source_table_name",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "target_table_name",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "number_of_records_match",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "number_of_records_mismatch",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "number_of_records_only_in_source",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "number_of_records_only_in_target",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "number_of_records_unsecured_in_target",
                                        "schema": {},
                                        "createdBy": "table",
                                        "mandatory": false
                                    },
                                    {
                                        "name": "match_result",
                                        "schema": {
                                            "type": "string"
                                        },
                                        "createdBy": "table",
                                        "mandatory": false
                                    }
                                ],
                                "outputs": []
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "connections": [
        {
            "leftPort": {
                "actor": "LUName",
                "name": "lu_name"
            },
            "rightPort": {
                "actor": "K2VERIFY_INTERFACE",
                "name": "luName"
            }
        },
        {
            "leftPort": {
                "actor": "LUName",
                "name": "lu_name"
            },
            "rightPort": {
                "actor": "K2VERIFY_SCHEMA",
                "name": "luName"
            }
        },
        {
            "leftPort": {
                "actor": "LUName",
                "name": "lu_name"
            },
            "rightPort": {
                "actor": "CheckReportCondition",
                "name": "schema"
            }
        },
        {
            "leftPort": {
                "actor": "LUName",
                "name": "lu_name"
            },
            "rightPort": {
                "actor": "ExtractKeysFromCassTable",
                "name": "schema"
            }
        },
        {
            "leftPort": {
                "actor": "Now",
                "name": "date"
            },
            "rightPort": {
                "actor": "START_TIME",
                "name": "value"
            }
        },
        {
            "leftPort": {
                "actor": "START_TIME",
                "name": "string"
            },
            "rightPort": {
                "actor": "StartedTableVerify",
                "name": "start_time"
            }
        },
        {
            "leftPort": {
                "actor": "START_TIME",
                "name": "string"
            },
            "rightPort": {
                "actor": "VerifyInProgress",
                "name": "start_time"
            }
        },
        {
            "leftPort": {
                "actor": "START_TIME",
                "name": "string"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "start_time"
            }
        },
        {
            "leftPort": {
                "actor": "START_TIME",
                "name": "string"
            },
            "rightPort": {
                "actor": "VerifyCancelled",
                "name": "start_time"
            }
        },
        {
            "leftPort": {
                "actor": "START_TIME",
                "name": "string"
            },
            "rightPort": {
                "actor": "VerifyFailed",
                "name": "start_time"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_INTERFACE",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "StartedTableVerify",
                "name": "interface"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_INTERFACE",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "VerifyInProgress",
                "name": "interface"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_INTERFACE",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "interface"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_INTERFACE",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "VerifyCancelled",
                "name": "interface"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_INTERFACE",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "VerifyFailed",
                "name": "interface"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_INTERFACE",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "TableSummaryRows",
                "name": "interface"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_SCHEMA",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "StartedTableVerify",
                "name": "schema"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_SCHEMA",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "VerifyInProgress",
                "name": "schema"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_SCHEMA",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "schema"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_SCHEMA",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "VerifyCancelled",
                "name": "schema"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_SCHEMA",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "VerifyFailed",
                "name": "schema"
            }
        },
        {
            "leftPort": {
                "actor": "K2VERIFY_SCHEMA",
                "name": "variableValue"
            },
            "rightPort": {
                "actor": "TableSummaryRows",
                "name": "result_schema"
            }
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "NotNull1",
                "name": "value"
            },
            "iterate": "First"
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "FormatBatchSql",
                "name": "table_name"
            },
            "iterate": "First",
            "path": [
                "Source_Table_Name"
            ]
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "FormatBatchSql",
                "name": "groupsCnt"
            },
            "iterate": "First",
            "path": [
                "Buckets"
            ]
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "SRC Table",
                "name": "params"
            },
            "iterate": "First",
            "path": [
                "Source_Table_Name"
            ],
            "arrayPosition": 0
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "SRC Interface",
                "name": "params"
            },
            "iterate": "First",
            "path": [
                "Source_Interface"
            ],
            "arrayPosition": 0
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "SRC Schema",
                "name": "params"
            },
            "iterate": "First",
            "path": [
                "Source_Schema"
            ],
            "arrayPosition": 0
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "TAR Table",
                "name": "params"
            },
            "iterate": "First",
            "path": [
                "Target_Table_Name"
            ],
            "arrayPosition": 0
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "TAR Interface",
                "name": "params"
            },
            "iterate": "First",
            "path": [
                "Target_Interface"
            ],
            "arrayPosition": 0
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "TAR Schema",
                "name": "params"
            },
            "iterate": "First",
            "path": [
                "Target_Schema"
            ],
            "arrayPosition": 0
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "StartedTableVerify",
                "name": "bucket_count"
            },
            "iterate": "First",
            "path": [
                "Buckets"
            ]
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "InterfaceType",
                "name": "interface"
            },
            "iterate": "First",
            "path": [
                "Source_Interface"
            ]
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "ExtractKeysFromCassTable",
                "name": "customized_key"
            },
            "iterate": "First",
            "path": [
                "Customized_Key_Comparison"
            ]
        },
        {
            "leftPort": {
                "actor": "MTableLookup",
                "name": "result"
            },
            "rightPort": {
                "actor": "ExtractKeysFromCassTable",
                "name": "buckets_count"
            },
            "iterate": "First",
            "path": [
                "Buckets"
            ]
        },
        {
            "leftPort": {
                "actor": "InterfaceType",
                "name": "type"
            },
            "rightPort": {
                "actor": "CassandraInterface",
                "name": "a"
            }
        },
        {
            "leftPort": {
                "actor": "InterfaceType",
                "name": "type"
            },
            "rightPort": {
                "actor": "SRC Interface Type",
                "name": "params"
            },
            "arrayPosition": 0
        },
        {
            "leftPort": {
                "actor": "MaxWorkers",
                "name": "result"
            },
            "rightPort": {
                "actor": "IfElse1",
                "name": "test"
            }
        },
        {
            "leftPort": {
                "actor": "MaxWorkersString",
                "name": "string"
            },
            "rightPort": {
                "actor": "IfElse1",
                "name": "a"
            }
        },
        {
            "leftPort": {
                "actor": "IfElse1",
                "name": "result"
            },
            "rightPort": {
                "actor": "BatchCommand",
                "name": "maxWorkers"
            }
        },
        {
            "leftPort": {
                "actor": "FormatBatchSql",
                "name": "string"
            },
            "rightPort": {
                "actor": "BatchCommand",
                "name": "sql"
            }
        },
        {
            "leftPort": {
                "actor": "BatchCommand",
                "name": "string"
            },
            "rightPort": {
                "actor": "ExecuteBatch",
                "name": "sql"
            }
        },
        {
            "leftPort": {
                "actor": "ExecuteBatch",
                "name": "result"
            },
            "rightPort": {
                "actor": "BatchWait1",
                "name": "batchId"
            },
            "iterate": "First",
            "path": [
                "Batch id"
            ]
        },
        {
            "leftPort": {
                "actor": "ExecuteBatch",
                "name": "result"
            },
            "rightPort": {
                "actor": "VerifyInProgress",
                "name": "batch_id"
            },
            "iterate": "First",
            "path": [
                "Batch id"
            ]
        },
        {
            "leftPort": {
                "actor": "ExecuteBatch",
                "name": "result"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "batch_id"
            },
            "iterate": "First",
            "path": [
                "Batch id"
            ]
        },
        {
            "leftPort": {
                "actor": "ExecuteBatch",
                "name": "result"
            },
            "rightPort": {
                "actor": "VerifyCancelled",
                "name": "batch_id"
            },
            "iterate": "First",
            "path": [
                "Batch id"
            ]
        },
        {
            "leftPort": {
                "actor": "ExecuteBatch",
                "name": "result"
            },
            "rightPort": {
                "actor": "VerifyFailed",
                "name": "batch_id"
            },
            "iterate": "First",
            "path": [
                "Batch id"
            ]
        },
        {
            "leftPort": {
                "actor": "ErrorFields1",
                "name": "error"
            },
            "rightPort": {
                "actor": "BatchSuccess",
                "name": "value"
            }
        },
        {
            "leftPort": {
                "actor": "ErrorFields1",
                "name": "error"
            },
            "rightPort": {
                "actor": "IsCancelled",
                "name": "a"
            }
        },
        {
            "leftPort": {
                "actor": "BatchWait1",
                "name": "failed"
            },
            "rightPort": {
                "actor": "BucketsFailed > 0",
                "name": "a"
            }
        },
        {
            "leftPort": {
                "actor": "Now2",
                "name": "date"
            },
            "rightPort": {
                "actor": "END_TIME1",
                "name": "value"
            }
        },
        {
            "leftPort": {
                "actor": "END_TIME1",
                "name": "string"
            },
            "rightPort": {
                "actor": "VerifyCancelled",
                "name": "end_time"
            }
        },
        {
            "leftPort": {
                "actor": "END_TIME1",
                "name": "string"
            },
            "rightPort": {
                "actor": "VerifyFailed",
                "name": "end_time"
            }
        },
        {
            "leftPort": {
                "actor": "END_TIME1",
                "name": "string"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "end_time"
            }
        },
        {
            "leftPort": {
                "actor": "Failed",
                "name": "value"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "status"
            }
        },
        {
            "leftPort": {
                "actor": "Completed",
                "name": "value"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "status"
            }
        },
        {
            "leftPort": {
                "actor": "TableSummaryRows",
                "name": "result"
            },
            "rightPort": {
                "actor": "TableSummaryReport",
                "name": "params"
            },
            "iterate": "Iterate"
        },
        {
            "leftPort": {
                "actor": "TableSummaryRows",
                "name": "result"
            },
            "rightPort": {
                "actor": "Is Matched",
                "name": "mismatch"
            },
            "path": [
                "number_of_records_mismatch"
            ]
        },
        {
            "leftPort": {
                "actor": "TableSummaryRows",
                "name": "result"
            },
            "rightPort": {
                "actor": "Is Matched",
                "name": "source"
            },
            "path": [
                "number_of_records_only_in_source"
            ]
        },
        {
            "leftPort": {
                "actor": "TableSummaryRows",
                "name": "result"
            },
            "rightPort": {
                "actor": "Is Matched",
                "name": "target"
            },
            "path": [
                "number_of_records_only_in_target"
            ]
        },
        {
            "leftPort": {
                "actor": "Is Matched",
                "name": "result"
            },
            "rightPort": {
                "actor": "CheckReportCondition",
                "name": "result"
            }
        },
        {
            "leftPort": {
                "actor": "Is Matched",
                "name": "result"
            },
            "rightPort": {
                "actor": "TableSummaryReport",
                "name": "match_result"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Table_Name"
            },
            "rightPort": {
                "actor": "MTableLookup",
                "name": "Source_Table_Name"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Interface"
            },
            "rightPort": {
                "actor": "MTableLookup",
                "name": "Source_Interface"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Schema"
            },
            "rightPort": {
                "actor": "MTableLookup",
                "name": "Source_Schema"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Target_Table_Name"
            },
            "rightPort": {
                "actor": "MTableLookup",
                "name": "Target_Table_Name"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Target_Interface"
            },
            "rightPort": {
                "actor": "MTableLookup",
                "name": "Target_Interface"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Target_Schema"
            },
            "rightPort": {
                "actor": "MTableLookup",
                "name": "Target_Schema"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "task_id"
            },
            "rightPort": {
                "actor": "StartedTableVerify",
                "name": "task_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "execution_id"
            },
            "rightPort": {
                "actor": "StartedTableVerify",
                "name": "execution_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Table_Name"
            },
            "rightPort": {
                "actor": "StartedTableVerify",
                "name": "table_name"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "task_id"
            },
            "rightPort": {
                "actor": "TASK ID",
                "name": "task_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "execution_id"
            },
            "rightPort": {
                "actor": "EXECUTION ID",
                "name": "execution_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "log_pass"
            },
            "rightPort": {
                "actor": "LOG PASS",
                "name": "log_pass"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "compare_only_pii"
            },
            "rightPort": {
                "actor": "COMPARE ONLY PII",
                "name": "compare_only_pii"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "maxWorkers"
            },
            "rightPort": {
                "actor": "MaxWorkers",
                "name": "value"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "maxWorkers"
            },
            "rightPort": {
                "actor": "MaxWorkersString",
                "name": "maxWorkers"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "task_id"
            },
            "rightPort": {
                "actor": "VerifyInProgress",
                "name": "task_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "execution_id"
            },
            "rightPort": {
                "actor": "VerifyInProgress",
                "name": "execution_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Table_Name"
            },
            "rightPort": {
                "actor": "VerifyInProgress",
                "name": "table_name"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "task_id"
            },
            "rightPort": {
                "actor": "VerifyCancelled",
                "name": "task_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "execution_id"
            },
            "rightPort": {
                "actor": "VerifyCancelled",
                "name": "execution_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Table_Name"
            },
            "rightPort": {
                "actor": "VerifyCancelled",
                "name": "table_name"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "task_id"
            },
            "rightPort": {
                "actor": "VerifyFailed",
                "name": "task_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "execution_id"
            },
            "rightPort": {
                "actor": "VerifyFailed",
                "name": "execution_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Table_Name"
            },
            "rightPort": {
                "actor": "VerifyFailed",
                "name": "table_name"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "task_id"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "task_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "execution_id"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "execution_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Table_Name"
            },
            "rightPort": {
                "actor": "VerifyCompleted",
                "name": "table_name"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "execution_id"
            },
            "rightPort": {
                "actor": "TableSummaryRows",
                "name": "execution_id"
            }
        },
        {
            "leftPort": {
                "actor": "flowArgs",
                "name": "Source_Table_Name"
            },
            "rightPort": {
                "actor": "TableSummaryRows",
                "name": "source_table_name"
            }
        }
    ]
}